# 3장 템플릿
템플릿이란 개방 폐쇄 원칙(OCP)와 같이 바뀌는 성질이 다른 코드 중에서 변경이 거의 일어나지 않으며 일정한 패턴으로 유지되는 특성을 가진 부분을 자유롭게 변경되는 성질을 가진 부분으로부터 독립시켜서 효과적으로 활용할 수 있도록 하는 방법이다.

### 3.2.2 분리와 재사용을 위한 디자인 패턴 적용
- 메소드 추출
- 템플릿 메소드 패턴
  > 상속을 통해 기능을 확장해서 사용하는 부분이다. 변하지 않는 부분은 슈퍼 클래스에 두고 변하는 부분은 추상 메소드로 정의해둬서 서브 클래스에서 ㅗㅇ버라이드하여 새롭게 정의해 쓰도록 한다.
  - 클래스 레벨에서 컴파일 시점에 관계가 결정된다. 관계의 유연성이 떨어지며 상속을 통한 확장을 꾀하는 템플릿 메소드 패턴의 단점이 있다. 
- 전략 패턴
  > 오브젝트를 분리하고 클래스 레벨에서는 인터페이스를 통해서만 의존하도록 만드는 전략
  전략 패턴은 필요에 따라 컨텍스트는 그대로 유지되면서 전략을 바꿔 쓸 수 있다는 것인데 컨텍스트 안에서 이미 구체적인 전략 클래스가 고정되어 있다면 맞지 않는 것이다. 

### 3.4.2. JdbcContext의 특별한 DI
의존관계 주입이라는 개념을 충실히 따르자면, 인터페이스를 사이에 둬서 클래스 레벨에서는 의존관계가 고정되지 않게 하고, 런터임 시에 의존할 오브젝트와의 관계를 동적으로 주입해주는 것이 맞다. 그러나 스프링 DI는 넓게 보자면 객체의 생성과 관계설정에 대한 제어권한을 오브젝트에서 제거하고 외부로 위임했다는 IoC라는 개념을 포괄한다. 그런 의미에서 JdbcContext 클래스를 스프링을 이용해 UserDao 객체에서 사용하게 주입했다는 건 DI의 기본을 따르고 있다고 볼 수 있다.

클래스를 바로 사용하는 코드 구성을 DI에 적용하는 것은 가장 마지막 단계에서 고려해야 한다. 

클래스를 DI에 등록하지 않고 사용하는 방법도 있다. 

## 템플릿과 콜백
전략 패턴의 기본 구조에 익명 내부 클래스를 활용한 방식을 스프링에서는 템플릿/콜백 패턴이라고 부른다. 전략 패턴의 컨텍스트를 템플릿이라 부르고, 익명 내부 클래스로 만들어지는 오브젝트를 콜백이라고 부른다. 